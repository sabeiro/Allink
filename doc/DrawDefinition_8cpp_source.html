<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Allink: src/Addraw/DrawDefinition.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Allink
   &#160;<span id="projectnumber">v0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_8e9a8b7e3c72bcc96dd64e909190dc02.html">src</a>      </li>
      <li class="navelem"><a class="el" href="dir_0282dfabc9d3d91e50dfe3859648f6c2.html">Addraw</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">DrawDefinition.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">DrawDefinition: Create some useful lists</span>
<a name="l00003"></a>00003 <span class="comment">Copyright (C) 2008-2010 by Giovanni Marelli &lt;sabeiro@virgilio.it&gt;</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">This program is free software; you can redistribute it and/or modify</span>
<a name="l00007"></a>00007 <span class="comment">it under the terms of the GNU General Public License as published by</span>
<a name="l00008"></a>00008 <span class="comment">the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00009"></a>00009 <span class="comment">(at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment"></span>
<a name="l00011"></a>00011 <span class="comment">This program is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment">GNU General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment">You should have received a copy of the GNU General Public License</span>
<a name="l00016"></a>00016 <span class="comment">along with this program; If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00017"></a>00017 <span class="comment">***********************************************************************/</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;../../include/Draw.h&quot;</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifdef __glut_h__</span>
<a name="l00021"></a><a class="code" href="classDraw.html#ac0790850f6751e5fe0f47d16d7f67255">00021</a> <span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="classDraw.html#ac0790850f6751e5fe0f47d16d7f67255" title="Initializes all the view constants.">Draw::InitConstant</a>(){
<a name="l00022"></a>00022   <a class="code" href="classDraw.html#a31a0a56b0946f085f98ad55b0d06d072" title="Obsolete.">spin</a> =  0.;angolo = 0.; dspin = .1 ;
<a name="l00023"></a>00023   <a class="code" href="classDraw.html#a455f01527a74815c61adaae99d0ed65c" title="Translation, wheel.">xp</a>=0.  ; yp=0.  ; zp= 0.; zw = -1.;
<a name="l00024"></a>00024   <a class="code" href="classDraw.html#aee18a4afd2986ed1f3be1939903b9539" title="Angles.">xa</a>=0.  ; ya=0.  ; za= 0.;
<a name="l00025"></a>00025   <a class="code" href="classDraw.html#a2a5f8688f3d0a0c3db87e0682e332cd4" title="Orientation of the light.">xf</a>=55. ; yf=5.  ; zf= 0.;
<a name="l00026"></a>00026   <a class="code" href="classDraw.html#a5b04d6b8d3fc2e33a6bf83d1fbbec2e9" title="Position of the info string.">xi</a>=-.4 ; yi=-.4 ; zi= -0.;
<a name="l00027"></a>00027   <a class="code" href="classDraw.html#afc2ee110131a4ef6b8d8e458b2aa8781" title="Position of the legend.">xLeg</a>=-1.4; yLeg=-.3 ; zLeg= 0.;
<a name="l00028"></a>00028   <a class="code" href="classDraw.html#aa7a99ea5e487ab7f3c00e958aac361f1" title="Width of the legend.">dxLeg</a>=.4;dyLeg=.8;
<a name="l00029"></a>00029   <a class="code" href="classDraw.html#ab88d934d3382f091467ed13c7ac67b02" title="Position of the light0.">xl0</a>=1. ; yl0=1. ; zl0=1.;
<a name="l00030"></a>00030   <a class="code" href="classDraw.html#a5f8fa02f2dbb08f16c236e9494c7f32b" title="Position of the light1.">xl1</a>=1. ; yl1=0. ; zl1=1.;
<a name="l00031"></a>00031   <a class="code" href="classDraw.html#a33a570150f3000f6af434d1f439971d3" title="Background color.">Rback</a> = 1.0; Gback = 1.0;Bback = 1.0;Aback = 0.0;
<a name="l00032"></a>00032   <a class="code" href="classDraw.html#a48af8052c97c27dcadc5524421180495" title="Finess of the grid.">GridStep</a> = 2.;
<a name="l00033"></a>00033   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> d=0;d&lt;3;d++)
<a name="l00034"></a>00034     <a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[d] = (<span class="keywordtype">int</span>)(<a class="code" href="classDraw.html#a48af8052c97c27dcadc5524421180495" title="Finess of the grid.">GridStep</a>*<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[d]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>);
<a name="l00035"></a>00035   <a class="code" href="classDraw.html#a20146731f2945f9b0c25d61e11bb0217" title="Current step for the picture&#39;s name.">Step</a> = 0;
<a name="l00036"></a>00036   pr = 1;<span class="comment">//prospettiva</span>
<a name="l00037"></a>00037   <a class="code" href="classDraw.html#a4bd038ddc170e76bc94d37feb742667c" title="Decides to draw points or spheres.">IfPoint</a> = 1;<span class="comment">//point or Sphere</span>
<a name="l00038"></a>00038   <a class="code" href="classDraw.html#a068515d973f897b4d629594f8a30aa3a" title="Removes the info line.">IfInfo</a> = 1;
<a name="l00039"></a>00039   <a class="code" href="classDraw.html#ab7c162bdd1aa006017f7e85f0b68ad22" title="Boh.">IfImage</a> = 0;
<a name="l00040"></a>00040   <a class="code" href="classDraw.html#af08a6e98855e453a79f375df01cf15c4" title="Ignores the script file.">IfScript</a> = 1;
<a name="l00041"></a>00041   <a class="code" href="classDraw.html#a03b1ef931447021cebcff5286c6a3783" title="Activate the blending.">IfBlend</a> = 1;
<a name="l00042"></a>00042   <a class="code" href="classDraw.html#a8e48dcc59e4b8bbe40fe5b58321e4e72" title="Puts/removes the box edges.">la</a> = 1;
<a name="l00043"></a>00043   <a class="code" href="classDraw.html#a5f0c1692f0d6fbbf9a083f07566bd3ce" title="Puts/removes the grid.">gr</a> = 0;
<a name="l00044"></a>00044   <a class="code" href="classDraw.html#af5624deb9e8da457ddddec7ad9625127" title="Enables/disables illumination.">lu</a> = 1;
<a name="l00045"></a>00045   <a class="code" href="classDraw.html#a024603cda52d9847e8d8df3c2e884b8c" title="Enables/disables spot light.">sp</a> = 1;
<a name="l00046"></a>00046   <a class="code" href="classDraw.html#a3bf1137663f19e5c361c845cf4dfb7db" title="Enables/disables fog.">ne</a> = 0;
<a name="l00047"></a>00047   <a class="code" href="classDraw.html#ac4d6a04b585898500e8de28bfb0a926b" title="Angle DxSx, SuGiu.">AngleDxSx</a> = 0.;
<a name="l00048"></a>00048   AngleSuGiu = 0.;
<a name="l00049"></a>00049   <a class="code" href="classDraw.html#a2e742183addcbbee8c3d478448355b43" title="Activate the illumination for a specific material.">IfMaterial</a> = 1;
<a name="l00050"></a>00050   <a class="code" href="classDraw.html#af5edc3c8867513cbb290646b3e0e20ff" title="Choose Depth map.">ChooseDepthMap</a>(0);
<a name="l00051"></a>00051   sprintf(<a class="code" href="classDraw.html#a65627378647d3a125ae55432f3f569e2" title="Info line.">info</a>,<span class="stringliteral">&quot;&quot;</span>);
<a name="l00052"></a>00052 }
<a name="l00053"></a><a class="code" href="classDraw.html#a7e12d94e8036fd5222db58072fe8a4c1">00053</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#a7e12d94e8036fd5222db58072fe8a4c1" title="Quad.">Draw::DefQuad</a>(<span class="keywordtype">int</span> NSquare){
<a name="l00054"></a>00054   glDeleteLists(<a class="code" href="classDraw.html#a075d5ecc7d5e24fede4773d630ee0065" title="Refers to the list of the square.">Quad</a>,1);
<a name="l00055"></a>00055   <a class="code" href="classDraw.html#a075d5ecc7d5e24fede4773d630ee0065" title="Refers to the list of the square.">Quad</a> = glGenLists(1);
<a name="l00056"></a>00056   <span class="keywordtype">double</span> xEdge = 1./(double)NSquare*<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[0]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>;
<a name="l00057"></a>00057   <span class="keywordtype">double</span> yEdge = 1./(double)NSquare*<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[1]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>;
<a name="l00058"></a>00058   glNewList(<a class="code" href="classDraw.html#a075d5ecc7d5e24fede4773d630ee0065" title="Refers to the list of the square.">Quad</a>,GL_COMPILE);
<a name="l00059"></a>00059   glBegin(GL_POLYGON);
<a name="l00060"></a>00060   glNormal3f(0.,0.,1.);
<a name="l00061"></a>00061   glVertex3f(0,0,0);
<a name="l00062"></a>00062   glVertex3f(xEdge,0,0);
<a name="l00063"></a>00063   glVertex3f(xEdge,yEdge,0);
<a name="l00064"></a>00064   glVertex3f(0,yEdge,0);
<a name="l00065"></a>00065   glEnd();
<a name="l00066"></a>00066   glEndList();
<a name="l00067"></a>00067   <span class="keywordflow">return</span> <a class="code" href="classDraw.html#a075d5ecc7d5e24fede4773d630ee0065" title="Refers to the list of the square.">Quad</a>;
<a name="l00068"></a>00068 }
<a name="l00069"></a><a class="code" href="classDraw.html#a57d5c994950e11fb7e58680393213343">00069</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#a57d5c994950e11fb7e58680393213343" title="Hexagon.">Draw::DefHexagon</a>(){
<a name="l00070"></a>00070   glDeleteLists(<a class="code" href="classDraw.html#ab3a3a889149c8b1ff7e39ca3c032f16c" title="Refers to the list of a hexagon.">Hexagon</a>,1);
<a name="l00071"></a>00071   <a class="code" href="classDraw.html#ab3a3a889149c8b1ff7e39ca3c032f16c" title="Refers to the list of a hexagon.">Hexagon</a> = glGenLists(1);
<a name="l00072"></a>00072   glNewList(<a class="code" href="classDraw.html#ab3a3a889149c8b1ff7e39ca3c032f16c" title="Refers to the list of a hexagon.">Hexagon</a>,GL_COMPILE);
<a name="l00073"></a>00073   <span class="keywordtype">double</span> Lato=0.01;
<a name="l00074"></a>00074   glBegin(GL_POLYGON);
<a name="l00075"></a>00075   <span class="comment">//  glBegin(GL_POINTS);</span>
<a name="l00076"></a>00076   <span class="comment">//  glVertex3f(0.,0.,0.);</span>
<a name="l00077"></a>00077   glNormal3f(0.,0.,1.);
<a name="l00078"></a>00078   glVertex3f(Lato*.5,-Lato*.87,0.);
<a name="l00079"></a>00079   glVertex3f(Lato,0.,0.);
<a name="l00080"></a>00080   glVertex3f(Lato*.5,Lato*.87,0.);
<a name="l00081"></a>00081   glVertex3f(-Lato*.5,Lato*.87,0.);
<a name="l00082"></a>00082   glVertex3f(-Lato,0.,0.);
<a name="l00083"></a>00083   glVertex3f(-Lato*.5,-Lato*.87,0.);
<a name="l00084"></a>00084   glEnd();
<a name="l00085"></a>00085   glEndList();
<a name="l00086"></a>00086   <span class="keywordflow">return</span> <a class="code" href="classDraw.html#ab3a3a889149c8b1ff7e39ca3c032f16c" title="Refers to the list of a hexagon.">Hexagon</a>;
<a name="l00087"></a>00087 }
<a name="l00088"></a><a class="code" href="classDraw.html#a0ab1b8899eb5e75e63634120f152d532">00088</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#a0ab1b8899eb5e75e63634120f152d532" title="Cube.">Draw::DefCube</a>(<span class="keywordtype">int</span> NSquare){
<a name="l00089"></a>00089   glDeleteLists(<a class="code" href="classDraw.html#a79fa212e7dfcc2876d337a3635ecdc6f" title="Refers to the list of the texture.">Cube</a>,1);
<a name="l00090"></a>00090   <a class="code" href="classDraw.html#a79fa212e7dfcc2876d337a3635ecdc6f" title="Refers to the list of the texture.">Cube</a> = glGenLists(1);
<a name="l00091"></a>00091   <span class="keywordtype">double</span> xEdge = 1./(double)NSquare*<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[0]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>;
<a name="l00092"></a>00092   <span class="keywordtype">double</span> yEdge = 1./(double)NSquare*<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[1]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>;
<a name="l00093"></a>00093   <span class="keywordtype">double</span> zEdge = 1./(double)NSquare*<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[2]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>;
<a name="l00094"></a>00094   glNewList(<a class="code" href="classDraw.html#a79fa212e7dfcc2876d337a3635ecdc6f" title="Refers to the list of the texture.">Cube</a>,GL_COMPILE);
<a name="l00095"></a>00095   glBegin(GL_QUADS);
<a name="l00096"></a>00096   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> f=0;f&lt;2;f++){
<a name="l00097"></a>00097     glNormal3d(0.,0.,1.);
<a name="l00098"></a>00098     glVertex3d(0,0,f*zEdge);
<a name="l00099"></a>00099     glVertex3d(xEdge,0,f*zEdge);
<a name="l00100"></a>00100     glVertex3d(xEdge,yEdge,f*zEdge);
<a name="l00101"></a>00101     glVertex3d(0,yEdge,f*zEdge);
<a name="l00102"></a>00102     glNormal3d(1.,0.,0.);
<a name="l00103"></a>00103     glVertex3d(f*xEdge,0,0);
<a name="l00104"></a>00104     glVertex3d(f*xEdge,0,zEdge);
<a name="l00105"></a>00105     glVertex3d(f*xEdge,yEdge,zEdge);
<a name="l00106"></a>00106     glVertex3d(f*xEdge,yEdge,0);
<a name="l00107"></a>00107     glNormal3d(0.,1.,0.);
<a name="l00108"></a>00108     glVertex3d(0,f*yEdge,0);
<a name="l00109"></a>00109     glVertex3d(0,f*yEdge,zEdge);
<a name="l00110"></a>00110     glVertex3d(xEdge,f*yEdge,zEdge);
<a name="l00111"></a>00111     glVertex3d(xEdge,f*yEdge,0);
<a name="l00112"></a>00112   }
<a name="l00113"></a>00113   glEnd();
<a name="l00114"></a>00114   glEndList();
<a name="l00115"></a>00115   <span class="keywordflow">return</span> <a class="code" href="classDraw.html#a79fa212e7dfcc2876d337a3635ecdc6f" title="Refers to the list of the texture.">Cube</a>;
<a name="l00116"></a>00116 }
<a name="l00117"></a><a class="code" href="classDraw.html#a9e8807139062d3d8e7a5ae14e98480da">00117</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#a9e8807139062d3d8e7a5ae14e98480da" title="Wall.">Draw::DefWall</a>(){
<a name="l00118"></a>00118   glDeleteLists(<a class="code" href="classDraw.html#ab6e9ec77599bfe76cdbe67e70d1b2ce8" title="Refers to the list of a wall.">GlWall</a>,1);
<a name="l00119"></a>00119   <a class="code" href="classDraw.html#ab6e9ec77599bfe76cdbe67e70d1b2ce8" title="Refers to the list of a wall.">GlWall</a> = glGenLists(1);
<a name="l00120"></a>00120   glEnable(GL_TEXTURE_2D);
<a name="l00121"></a>00121   glNewList(<a class="code" href="classDraw.html#ab6e9ec77599bfe76cdbe67e70d1b2ce8" title="Refers to the list of a wall.">GlWall</a>,GL_COMPILE);
<a name="l00122"></a>00122   <a class="code" href="classDraw.html#a5fd96ad8c1ebeede7341bcf3a20aa65d" title="Define a simple texture.">DefTexture</a>();
<a name="l00123"></a>00123   <span class="comment">//  GL_DECAL,GL_MODULATE,GL_BLEND,GL_REPLACE</span>
<a name="l00124"></a>00124   glTexEnvi(GL_TEXTURE_ENV,GL_TEXTURE_ENV_MODE,GL_MODULATE);
<a name="l00125"></a>00125   glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,
<a name="l00126"></a>00126         GL_LINEAR_MIPMAP_LINEAR);
<a name="l00127"></a>00127   glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
<a name="l00128"></a>00128   <span class="comment">// glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,</span>
<a name="l00129"></a>00129   <span class="comment">//                                      GL_NEAREST_MIPMAP_NEAREST);</span>
<a name="l00130"></a>00130   <span class="comment">// glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);</span>
<a name="l00131"></a>00131   glBegin(GL_QUADS);
<a name="l00132"></a>00132   glNormal3d(0.,0.,1.);
<a name="l00133"></a>00133   glColor4f(1.,.0,.0,.5);
<a name="l00134"></a>00134   glVertex3d(0.,0.,0.);
<a name="l00135"></a>00135   glColor4f(1.,.4,.0,.5);
<a name="l00136"></a>00136   glVertex3d(<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[0]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>,0.,0.);
<a name="l00137"></a>00137   glColor4f(1.,.4,.4,.5);
<a name="l00138"></a>00138   glVertex3d(<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[0]*InvScaleUn,<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[1]*InvScaleUn,0.);
<a name="l00139"></a>00139   glColor4f(1.,.0,.4,.5);
<a name="l00140"></a>00140   glVertex3d(0.,<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[1]*InvScaleUn,0.);
<a name="l00141"></a>00141   glColor4f(1.,.2,.2,.5);
<a name="l00142"></a>00142   glTexCoord2f(0.8, 0.8);glVertex3d(0.,0.,0.);
<a name="l00143"></a>00143   glColor4f(1.,.2,.0,.5);
<a name="l00144"></a>00144   glTexCoord2f(0.2, 0.8);glVertex3d(<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[0]*InvScaleUn,0.,0.);
<a name="l00145"></a>00145   glColor4f(1.,.0,.0,.5);
<a name="l00146"></a>00146   glTexCoord2f(0.2, 0.2);glVertex3d(<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[0]*InvScaleUn,<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[1]*InvScaleUn,0.);
<a name="l00147"></a>00147   glColor4f(1.,.0,.2,.5);
<a name="l00148"></a>00148   glTexCoord2f(0.8, 0.2);glVertex3d(0.,<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[1]*InvScaleUn,0.);
<a name="l00149"></a>00149   glEnd();
<a name="l00150"></a>00150   glEndList();
<a name="l00151"></a>00151   glDisable(GL_TEXTURE_2D);
<a name="l00152"></a>00152   <span class="keywordflow">return</span> <a class="code" href="classDraw.html#ab6e9ec77599bfe76cdbe67e70d1b2ce8" title="Refers to the list of a wall.">GlWall</a>;
<a name="l00153"></a>00153 }
<a name="l00154"></a><a class="code" href="classDraw.html#aa63c0ecef2860e57c23d6ff1e631189b">00154</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#aa63c0ecef2860e57c23d6ff1e631189b" title="Arrow.">Draw::DefArrow</a>(){
<a name="l00155"></a>00155   glDeleteLists(<a class="code" href="classDraw.html#ae374e4cd54f633606db3098af179b138" title="Refers to the list of a arrow.">Arrow</a>,1);
<a name="l00156"></a>00156   <a class="code" href="classDraw.html#ae374e4cd54f633606db3098af179b138" title="Refers to the list of a arrow.">Arrow</a> = glGenLists(1);
<a name="l00157"></a>00157   glNewList(<a class="code" href="classDraw.html#ae374e4cd54f633606db3098af179b138" title="Refers to the list of a arrow.">Arrow</a>,GL_COMPILE);
<a name="l00158"></a>00158   glNormal3f(0.,0.,-1.);
<a name="l00159"></a>00159   glBegin(GL_LINES);
<a name="l00160"></a>00160   glVertex3f(0.,0.,0.);
<a name="l00161"></a>00161   glVertex3f(1.,0.,0.);
<a name="l00162"></a>00162   glEnd();
<a name="l00163"></a>00163   glBegin(GL_LINES);
<a name="l00164"></a>00164   glVertex3f(1.,0.,0.);
<a name="l00165"></a>00165   glVertex3f(.95,.02,0.);
<a name="l00166"></a>00166   glEnd();
<a name="l00167"></a>00167   glBegin(GL_LINES);
<a name="l00168"></a>00168   glVertex3f(1.,0.,0.);
<a name="l00169"></a>00169   glVertex3f(.95,-.02,0.);
<a name="l00170"></a>00170   glEnd();
<a name="l00171"></a>00171   glEndList();
<a name="l00172"></a>00172   <span class="keywordflow">return</span> <a class="code" href="classDraw.html#ae374e4cd54f633606db3098af179b138" title="Refers to the list of a arrow.">Arrow</a>;
<a name="l00173"></a>00173 }
<a name="l00174"></a><a class="code" href="classDraw.html#a19a76422b4564ec10df73ec0256f2974">00174</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#a19a76422b4564ec10df73ec0256f2974" title="Arrow.">Draw::DefArrowThin</a>(){
<a name="l00175"></a>00175   glDeleteLists(<a class="code" href="classDraw.html#ae374e4cd54f633606db3098af179b138" title="Refers to the list of a arrow.">Arrow</a>,1);
<a name="l00176"></a>00176   <a class="code" href="classDraw.html#ae374e4cd54f633606db3098af179b138" title="Refers to the list of a arrow.">Arrow</a> = glGenLists(1);
<a name="l00177"></a>00177   glNewList(<a class="code" href="classDraw.html#ae374e4cd54f633606db3098af179b138" title="Refers to the list of a arrow.">Arrow</a>,GL_COMPILE);
<a name="l00178"></a>00178   glNormal3f(0.,0.,-1.);
<a name="l00179"></a>00179   glBegin(GL_LINES);
<a name="l00180"></a>00180   glVertex3f(0.,0.,0.);
<a name="l00181"></a>00181   glVertex3f(1.,0.,0.);
<a name="l00182"></a>00182   glEnd();
<a name="l00183"></a>00183   glBegin(GL_LINES);
<a name="l00184"></a>00184   glVertex3f(1.,0.,0.);
<a name="l00185"></a>00185   glVertex3f(.95,.002,0.);
<a name="l00186"></a>00186   glEnd();
<a name="l00187"></a>00187   glBegin(GL_LINES);
<a name="l00188"></a>00188   glVertex3f(1.,0.,0.);
<a name="l00189"></a>00189   glVertex3f(.95,-.002,0.);
<a name="l00190"></a>00190   glEnd();
<a name="l00191"></a>00191   glEndList();
<a name="l00192"></a>00192   <span class="keywordflow">return</span> <a class="code" href="classDraw.html#ae374e4cd54f633606db3098af179b138" title="Refers to the list of a arrow.">Arrow</a>;
<a name="l00193"></a>00193 }
<a name="l00194"></a><a class="code" href="classDraw.html#a318bab761ab1ad340c3a7d2d17df4f9b">00194</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#a318bab761ab1ad340c3a7d2d17df4f9b" title="Point.">Draw::DefPoint</a>(){
<a name="l00195"></a>00195   glDeleteLists(Point,1);
<a name="l00196"></a>00196   Point = glGenLists(1);
<a name="l00197"></a>00197   glNewList(Point,GL_COMPILE);
<a name="l00198"></a>00198   glBegin(GL_POINTS);
<a name="l00199"></a>00199   glNormal3f(0.,0.,1.);
<a name="l00200"></a>00200   glVertex3f(0,0,0);
<a name="l00201"></a>00201   glEnd();
<a name="l00202"></a>00202   glEndList();
<a name="l00203"></a>00203   <span class="keywordflow">return</span> <a class="code" href="classDraw.html#a6292fadc971cb5194d5d35a18223ca2c" title="Refers to the list of the point.">Point</a>;
<a name="l00204"></a>00204 }
<a name="l00205"></a><a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340">00205</a> <span class="keywordtype">double</span> <a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340" title="Calculate the normal.">Draw::Normal</a>(<span class="keywordtype">double</span> *v,<span class="keywordtype">double</span> *u,<span class="keywordtype">double</span> *w,<span class="keywordtype">double</span> *n){
<a name="l00206"></a>00206   <span class="keywordtype">double</span> Norma = 0.;
<a name="l00207"></a>00207   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> d=0;d&lt;3;d++){
<a name="l00208"></a>00208     <span class="keywordtype">int</span> Coord1 = (d+1)%3;
<a name="l00209"></a>00209     <span class="keywordtype">int</span> Coord2 = (d+2)%3;
<a name="l00210"></a>00210     <span class="keywordtype">double</span> Uno = (v[Coord1] - w[Coord1])*(u[Coord2] - w[Coord2]); 
<a name="l00211"></a>00211     <span class="keywordtype">double</span> Due = (v[Coord2] - w[Coord2])*(u[Coord1] - w[Coord1]); 
<a name="l00212"></a>00212     n[d] = Uno - Due;
<a name="l00213"></a>00213     Norma += SQR(n[d]);
<a name="l00214"></a>00214   }
<a name="l00215"></a>00215   Norma = sqrt(Norma);
<a name="l00216"></a>00216   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> d=0;d&lt;3;d++)
<a name="l00217"></a>00217     n[d] /= Norma;
<a name="l00218"></a>00218   <span class="keywordflow">return</span> Norma;
<a name="l00219"></a>00219 }
<a name="l00220"></a><a class="code" href="classDraw.html#af4ca54f4f60c7e6b3e44f81a82afa810">00220</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#af4ca54f4f60c7e6b3e44f81a82afa810" title="Cylinder.">Draw::DefCylinder</a>(<span class="keywordtype">double</span> CyEdge,<span class="keywordtype">double</span> CyHeight){
<a name="l00221"></a>00221   <span class="keywordtype">int</span> ListRef = glGenLists(1);
<a name="l00222"></a>00222   glEnable(GL_LIGHTING);
<a name="l00223"></a>00223   glEnable( GL_LIGHT0 );
<a name="l00224"></a>00224   glMaterialfv(GL_BACK,  GL_AMBIENT,   DrAmbientRed); 
<a name="l00225"></a>00225   glMaterialfv(GL_BACK,  GL_DIFFUSE,   DrDiffuseRed); 
<a name="l00226"></a>00226   glMaterialfv(GL_FRONT, GL_AMBIENT,   DrAmbientRed); 
<a name="l00227"></a>00227   glMaterialfv(GL_FRONT, GL_DIFFUSE,   DrDiffuseRed); 
<a name="l00228"></a>00228   glMaterialfv(GL_FRONT, GL_SPECULAR,  DrSpecularWhite); 
<a name="l00229"></a>00229   glMaterialf( GL_FRONT, GL_SHININESS, 25.0); 
<a name="l00230"></a>00230   glNewList(ListRef,GL_COMPILE);
<a name="l00231"></a>00231   <span class="keywordtype">int</span> NEdges = 40;
<a name="l00232"></a>00232   <span class="keywordtype">double</span> Angle = DUE_PI/(double)(NEdges);
<a name="l00233"></a>00233   CyEdge *= <a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>;
<a name="l00234"></a>00234   CyHeight *= <a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>;
<a name="l00235"></a>00235   <span class="comment">//    glEnableClientState(GL_NORMAL_ARRAY);</span>
<a name="l00236"></a>00236   glBegin(GL_POLYGON);<span class="comment">//Kork</span>
<a name="l00237"></a>00237   glNormal3f(0.,0.,-1.);
<a name="l00238"></a>00238   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l=0;l&lt;NEdges+1;l++){
<a name="l00239"></a>00239     glVertex3d(CyEdge*cos(Angle*l),CyEdge*sin(Angle*l),-CyHeight*.5);
<a name="l00240"></a>00240   }
<a name="l00241"></a>00241   glEnd();<span class="comment">//Kork</span>
<a name="l00242"></a>00242   glBegin(GL_POLYGON);<span class="comment">//Kork</span>
<a name="l00243"></a>00243   glNormal3f(0.,0.,1.);
<a name="l00244"></a>00244   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l=0;l&lt;NEdges+1;l++){
<a name="l00245"></a>00245     glVertex3d(CyEdge*cos(Angle*l),CyEdge*sin(Angle*l),CyHeight*.5);
<a name="l00246"></a>00246   }
<a name="l00247"></a>00247   glEnd();<span class="comment">//Kork</span>
<a name="l00248"></a>00248   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l=0;l&lt;NEdges;l++){
<a name="l00249"></a>00249     <span class="keywordtype">double</span> v1[3] = {CyEdge*cos(Angle*l),CyEdge*sin(Angle*l),-CyHeight*.5};
<a name="l00250"></a>00250     <span class="keywordtype">double</span> v2[3] = {CyEdge*cos(Angle*l),CyEdge*sin(Angle*l),CyHeight*.5};
<a name="l00251"></a>00251     <span class="keywordtype">double</span> v3[3] = {CyEdge*cos(Angle*(l+1)),CyEdge*sin(Angle*(l+1)),CyHeight*.5};
<a name="l00252"></a>00252     <span class="keywordtype">double</span> v4[3] = {CyEdge*cos(Angle*(l+1)),CyEdge*sin(Angle*(l+1)),-CyHeight*.5};
<a name="l00253"></a>00253     <span class="keywordtype">double</span> vn[3];
<a name="l00254"></a>00254     glBegin(GL_POLYGON);<span class="comment">//Side</span>
<a name="l00255"></a>00255     <a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340" title="Calculate the normal.">Normal</a>(v2,v3,v1,vn);
<a name="l00256"></a>00256     <span class="comment">//printf(&quot;%lf %lf %lf\n&quot;,vn[0],vn[1],vn[2]);</span>
<a name="l00257"></a>00257     <span class="comment">//printf(&quot;%lf %lf %lf\n&quot;,-sin(Angle*(l)),cos(Angle*(l)),0);</span>
<a name="l00258"></a>00258     glNormal3f(vn[0],vn[1],vn[2]);
<a name="l00259"></a>00259     glNormal3f(-CyEdge*sin(Angle*(l)),CyEdge*cos(Angle*(l)),0);
<a name="l00260"></a>00260     glVertex3d(v1[0],v1[1],v1[2]);
<a name="l00261"></a>00261     <a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340" title="Calculate the normal.">Normal</a>(v3,v4,v2,vn);
<a name="l00262"></a>00262     glNormal3f(vn[0],vn[1],vn[2]);
<a name="l00263"></a>00263     glNormal3f(-CyEdge*sin(Angle*(l)),CyEdge*cos(Angle*(l)),0);
<a name="l00264"></a>00264     glVertex3d(v2[0],v2[1],v2[2]);
<a name="l00265"></a>00265     <a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340" title="Calculate the normal.">Normal</a>(v4,v1,v3,vn);
<a name="l00266"></a>00266     glNormal3f(vn[0],vn[1],vn[2]);
<a name="l00267"></a>00267     glNormal3f(-CyEdge*sin(Angle*(l+1)),CyEdge*cos(Angle*(l+1)),0);
<a name="l00268"></a>00268     glVertex3d(v3[0],v3[1],v3[2]);
<a name="l00269"></a>00269     <a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340" title="Calculate the normal.">Normal</a>(v1,v2,v4,vn);
<a name="l00270"></a>00270     glNormal3f(vn[0],vn[1],vn[2]);
<a name="l00271"></a>00271     glNormal3f(-CyEdge*sin(Angle*(l+1)),CyEdge*cos(Angle*(l+1)),0);
<a name="l00272"></a>00272     glVertex3d(v4[0],v4[1],v4[2]);
<a name="l00273"></a>00273     glEnd();<span class="comment">//Side</span>
<a name="l00274"></a>00274   }
<a name="l00275"></a>00275   glEndList();
<a name="l00276"></a>00276   glDisable(GL_LIGHTING);
<a name="l00277"></a>00277   <span class="keywordflow">return</span> ListRef;
<a name="l00278"></a>00278   <span class="comment">//Cupola</span>
<a name="l00279"></a>00279   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> cc=0;cc&lt;NEdges/2;cc+=1){
<a name="l00280"></a>00280     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c=0;c&lt;NEdges;c+=1){
<a name="l00281"></a>00281       <span class="keywordtype">double</span> Quota = CyHeight*.5;
<a name="l00282"></a>00282       <span class="keywordflow">if</span>(cc &gt; NEdges/4) Quota = - CyHeight*.5;
<a name="l00283"></a>00283       <span class="keywordtype">double</span> v1[3] = {CyEdge*cos(Angle*c)*sin(cc*Angle),
<a name="l00284"></a>00284             CyEdge*sin(Angle*c)*sin(cc*Angle),
<a name="l00285"></a>00285             CyEdge*cos(cc*Angle) + Quota};
<a name="l00286"></a>00286       <span class="keywordtype">double</span> v2[3] = {CyEdge*cos(Angle*(c+1))*sin(cc*Angle),
<a name="l00287"></a>00287             CyEdge*sin(Angle*(c+1))*sin(cc*Angle),
<a name="l00288"></a>00288             CyEdge*cos(cc*Angle) + Quota};
<a name="l00289"></a>00289       <span class="keywordtype">double</span> v3[3] = {CyEdge*cos(Angle*(c+1))*sin((cc+1)*Angle),
<a name="l00290"></a>00290             CyEdge*sin(Angle*(c+1))*sin((cc+1)*Angle),
<a name="l00291"></a>00291             CyEdge*cos((cc+1)*Angle) + Quota};
<a name="l00292"></a>00292       <span class="keywordtype">double</span> v4[3] = {CyEdge*cos(Angle*c)*sin((cc+1)*Angle),
<a name="l00293"></a>00293             CyEdge*sin(Angle*c)*sin((cc+1)*Angle),
<a name="l00294"></a>00294             CyEdge*cos((cc+1)*Angle) + Quota};
<a name="l00295"></a>00295       <span class="keywordtype">double</span> vn[3];
<a name="l00296"></a>00296       glBegin(GL_POLYGON);<span class="comment">//Kork</span>
<a name="l00297"></a>00297       glNormal3f(vn[0],vn[1],vn[2]);
<a name="l00298"></a>00298       <a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340" title="Calculate the normal.">Normal</a>(v1,v2,v3,vn);
<a name="l00299"></a>00299       glVertex3d(v1[0],v1[1],v1[2]);
<a name="l00300"></a>00300       glNormal3f(vn[0],vn[1],vn[2]);
<a name="l00301"></a>00301       <a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340" title="Calculate the normal.">Normal</a>(v2,v3,v4,vn);
<a name="l00302"></a>00302       glVertex3d(v2[0],v2[1],v2[2]);
<a name="l00303"></a>00303       glNormal3f(vn[0],vn[1],vn[2]);
<a name="l00304"></a>00304       <a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340" title="Calculate the normal.">Normal</a>(v3,v4,v1,vn);
<a name="l00305"></a>00305       glVertex3d(v3[0],v3[1],v3[2]);
<a name="l00306"></a>00306       glNormal3f(vn[0],vn[1],vn[2]);
<a name="l00307"></a>00307       <a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340" title="Calculate the normal.">Normal</a>(v4,v1,v2,vn);
<a name="l00308"></a>00308       glVertex3d(v4[0],v4[1],v4[2]);
<a name="l00309"></a>00309       glEnd();<span class="comment">//Kork</span>
<a name="l00310"></a>00310     }
<a name="l00311"></a>00311   }
<a name="l00312"></a>00312   glEndList();
<a name="l00313"></a>00313   <span class="keywordflow">return</span> ListRef;
<a name="l00314"></a>00314       <span class="comment">//    static GLUquadricObj *quadObj;     </span>
<a name="l00315"></a>00315       <span class="comment">//    quadObj = gluNewQuadric();</span>
<a name="l00316"></a>00316       <span class="comment">//    gluQuadricDrawStyle(quadObj, GLU_FILL);</span>
<a name="l00317"></a>00317       <span class="comment">//    gluQuadricNormals(quadObj, GLU_SMOOTH);</span>
<a name="l00318"></a>00318       <span class="comment">//    gluCylinder(quadObj,  Nano-&gt;Rad*InvScaleUn,  Nano-&gt;Rad*InvScaleUn,  Nano-&gt;Height*InvScaleUn, 20, 20);</span>
<a name="l00319"></a>00319 }
<a name="l00320"></a>00320 <span class="preprocessor">#include &lt;vector&gt;</span> 
<a name="l00321"></a><a class="code" href="classDraw.html#a48bd0a016aeca0bc3c42ddfbe4597bdc">00321</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#a48bd0a016aeca0bc3c42ddfbe4597bdc" title="Metallic cylinder.">Draw::DefMetalCylinder</a>(<span class="keywordtype">double</span> CyEdge,<span class="keywordtype">double</span> CyHeight){
<a name="l00322"></a>00322   <span class="comment">// GLfloat Light1[4] = {1.,1.,1.,1.};</span>
<a name="l00323"></a>00323   <span class="comment">// glMaterialfv(GL_FRONT_AND_BACK,GL_AMBIENT_AND_DIFFUSE,Light1);</span>
<a name="l00324"></a>00324   <span class="comment">// GLfloat Light2[4] = {1.,1.,1.,1.};</span>
<a name="l00325"></a>00325   <span class="comment">// glMaterialfv(GL_FRONT_AND_BACK,GL_DIFFUSE,Light2);</span>
<a name="l00326"></a>00326   <span class="comment">// GLfloat Light3[4] = {0.,0.,0.,1.};</span>
<a name="l00327"></a>00327   <span class="comment">// glMaterialfv(GL_FRONT_AND_BACK,GL_EMISSION,Light3);</span>
<a name="l00328"></a>00328   <span class="keywordtype">int</span> <a class="code" href="classDraw.html#ab55c93c4e818081ea7b8d1e2d41851f4" title="Refers to the list of another cylinder (obsolete)">MetalCylinder</a> = 0;
<a name="l00329"></a>00329   MetalCylinder = glGenLists(1);
<a name="l00330"></a>00330   glNewList(MetalCylinder,GL_COMPILE);
<a name="l00331"></a>00331   <span class="keywordtype">int</span> NEdges = 20;
<a name="l00332"></a>00332   <span class="keywordtype">double</span> Angle = DUE_PI/(double)(NEdges);
<a name="l00333"></a>00333   glEnableClientState(GL_VERTEX_ARRAY);
<a name="l00334"></a>00334   glEnable(GL_VERTEX_ARRAY);
<a name="l00335"></a>00335   glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);
<a name="l00336"></a>00336   glFrontFace(GL_CCW);   <span class="comment">//Tell OGL which orientation shall be the front face</span>
<a name="l00337"></a>00337   glShadeModel(GL_SMOOTH);
<a name="l00338"></a>00338   glEnableClientState(GL_NORMAL_ARRAY);
<a name="l00339"></a>00339   <span class="keywordtype">double</span> <a class="code" href="classDraw.html#a16f350a8340f724d1b358e89fe18c340" title="Calculate the normal.">Normal</a>[3]={.1,.1,.1};
<a name="l00340"></a>00340   glNormalPointer(GL_FLOAT,<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>),&amp;Normal[0]);  <span class="comment">//Pointer to the first color*/</span>
<a name="l00341"></a>00341   GLfloat *Kork = <span class="keyword">new</span> GLfloat [2*3*(NEdges)];
<a name="l00342"></a>00342   vector &lt;GLuint&gt; VecIndices;
<a name="l00343"></a>00343   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l=0;l&lt;NEdges;l++){
<a name="l00344"></a>00344     Kork[(l)*3+0] = CyEdge*cos(Angle*l);
<a name="l00345"></a>00345     Kork[(l)*3+1] = CyEdge*sin(Angle*l);
<a name="l00346"></a>00346     Kork[(l)*3+2] = CyHeight*.5;
<a name="l00347"></a>00347     VecIndices.push_back(l);
<a name="l00348"></a>00348   }
<a name="l00349"></a>00349   VecIndices.push_back(0);
<a name="l00350"></a>00350   <span class="keywordtype">int</span> NIndex = VecIndices.size();
<a name="l00351"></a>00351   <span class="comment">//    GLuint *Indices = new GLuint [NIndex];</span>
<a name="l00352"></a>00352   <span class="comment">//    for(int i=0;i&lt;NIndex;i++)Indices[i] = VecIndices[i];</span>
<a name="l00353"></a>00353   GLuint *Indices = &amp;VecIndices[0];
<a name="l00354"></a>00354   glVertexPointer(3,GL_FLOAT,3*<span class="keyword">sizeof</span>(GLfloat),Kork);
<a name="l00355"></a>00355   glDrawElements(GL_POLYGON,NIndex,GL_UNSIGNED_INT,Indices);
<a name="l00356"></a>00356   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l=0;l&lt;NEdges;l++)
<a name="l00357"></a>00357     Kork[(l)*3+2] = -CyHeight*.5;
<a name="l00358"></a>00358   glDrawElements(GL_POLYGON,NIndex,GL_UNSIGNED_INT,Indices);
<a name="l00359"></a>00359   <span class="keyword">delete</span> [] Kork;
<a name="l00360"></a>00360   VecIndices.clear();
<a name="l00361"></a>00361   GLfloat *Side = <span class="keyword">new</span> GLfloat [3*4];   
<a name="l00362"></a>00362   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l=0;l&lt;NEdges+1;l++){
<a name="l00363"></a>00363     Side[(0)*3+0] = CyEdge*cos(Angle*l);
<a name="l00364"></a>00364     Side[(0)*3+1] = CyEdge*sin(Angle*l);
<a name="l00365"></a>00365     Side[(0)*3+2] = -CyHeight*.5;
<a name="l00366"></a>00366     VecIndices.push_back(0);
<a name="l00367"></a>00367     Side[(1)*3+0] = CyEdge*cos(Angle*(l));
<a name="l00368"></a>00368     Side[(1)*3+1] = CyEdge*sin(Angle*(l));
<a name="l00369"></a>00369     Side[(1)*3+2] = CyHeight*.5;
<a name="l00370"></a>00370     VecIndices.push_back(1);
<a name="l00371"></a>00371     Side[(2)*3+0] = CyEdge*cos(Angle*(l+1));
<a name="l00372"></a>00372     Side[(2)*3+1] = CyEdge*sin(Angle*(l+1));
<a name="l00373"></a>00373     Side[(2)*3+2] = CyHeight*.5;
<a name="l00374"></a>00374     VecIndices.push_back(2);
<a name="l00375"></a>00375     Side[(3)*3+0] = CyEdge*cos(Angle*(l+1));
<a name="l00376"></a>00376     Side[(3)*3+1] = CyEdge*sin(Angle*(l+1));
<a name="l00377"></a>00377     Side[(3)*3+2] = -CyHeight*.5;
<a name="l00378"></a>00378     VecIndices.push_back(3);
<a name="l00379"></a>00379     Indices = &amp;VecIndices[0];
<a name="l00380"></a>00380     glVertexPointer(3,GL_FLOAT,3*<span class="keyword">sizeof</span>(GLfloat),Side);
<a name="l00381"></a>00381     glDrawElements(GL_QUADS,4,GL_UNSIGNED_INT,Indices);
<a name="l00382"></a>00382   }
<a name="l00383"></a>00383   <span class="keyword">delete</span> [] Side;
<a name="l00384"></a>00384   VecIndices.clear();
<a name="l00385"></a>00385   glEndList();
<a name="l00386"></a>00386   <span class="keywordflow">return</span> <a class="code" href="classDraw.html#ab55c93c4e818081ea7b8d1e2d41851f4" title="Refers to the list of another cylinder (obsolete)">MetalCylinder</a>;
<a name="l00387"></a>00387 }
<a name="l00388"></a>00388 
<a name="l00389"></a>00389 <span class="comment">// Written by Chris Halsall (chalsall@chalsall.com) for the </span>
<a name="l00390"></a>00390 <span class="comment">// O&#39;Reilly Network on Linux.com (oreilly.linux.com).</span>
<a name="l00391"></a>00391 <span class="comment">// May 2000.</span>
<a name="l00392"></a><a class="code" href="classDraw.html#a5fd96ad8c1ebeede7341bcf3a20aa65d">00392</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#a5fd96ad8c1ebeede7341bcf3a20aa65d" title="Define a simple texture.">Draw::DefTexture</a>(){
<a name="l00393"></a>00393   GLuint Texture_ID = 0;
<a name="l00394"></a>00394   GLenum gluerr;
<a name="l00395"></a>00395   GLubyte tex[128][128][4];
<a name="l00396"></a>00396   <span class="keywordtype">int</span> x,y,t;
<a name="l00397"></a>00397   <span class="keywordtype">int</span> hole_size = 3300; <span class="comment">// ~ == 57.45 ^ 2.</span>
<a name="l00398"></a>00398   <span class="comment">// Generate a texture index, then bind it for future operations.</span>
<a name="l00399"></a>00399   glGenTextures(1,&amp;Texture_ID);
<a name="l00400"></a>00400   glBindTexture(GL_TEXTURE_2D,Texture_ID);
<a name="l00401"></a>00401   <span class="comment">// Iterate across the texture array.</span>
<a name="l00402"></a>00402   <span class="keywordflow">for</span>(y=0;y&lt;128;y++) {
<a name="l00403"></a>00403     <span class="keywordflow">for</span>(x=0;x&lt;128;x++) {
<a name="l00404"></a>00404       <span class="comment">// A simple repeating squares pattern.</span>
<a name="l00405"></a>00405       <span class="comment">// Dark blue on white.</span>
<a name="l00406"></a>00406       <span class="keywordflow">if</span> ( ( (x+4)%32 &lt; 8 ) &amp;&amp; ( (y+4)%32 &lt; 8)) {
<a name="l00407"></a>00407    tex[x][y][0]=tex[x][y][1]=0; tex[x][y][2]=120;
<a name="l00408"></a>00408       } <span class="keywordflow">else</span> {
<a name="l00409"></a>00409    tex[x][y][0]=tex[x][y][1]=tex[x][y][2]=240;
<a name="l00410"></a>00410       }
<a name="l00411"></a>00411       <span class="comment">// Make a round dot in the texture&#39;s alpha-channel.</span>
<a name="l00412"></a>00412       <span class="comment">// Calculate distance to center (squared).</span>
<a name="l00413"></a>00413       t = (x-64)*(x-64) + (y-64)*(y-64) ;
<a name="l00414"></a>00414       <span class="keywordflow">if</span> ( t &lt; hole_size) <span class="comment">// Don&#39;t take square root; compare squared.</span>
<a name="l00415"></a>00415    tex[x][y][3]=255; <span class="comment">// The dot itself is opaque.</span>
<a name="l00416"></a>00416       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (t &lt; hole_size + 100)
<a name="l00417"></a>00417    tex[x][y][3]=128; <span class="comment">// Give our dot an anti-aliased edge.</span>
<a name="l00418"></a>00418       <span class="keywordflow">else</span>
<a name="l00419"></a>00419    tex[x][y][3]=0;   <span class="comment">// Outside of the dot, it&#39;s transparent.</span>
<a name="l00420"></a>00420     }
<a name="l00421"></a>00421   }
<a name="l00422"></a>00422   <span class="comment">// The GLU library helps us build MipMaps for our texture.</span>
<a name="l00423"></a>00423   <span class="keywordflow">if</span> ((gluerr=gluBuild2DMipmaps(GL_TEXTURE_2D, 4, 128, 128, GL_RGBA,
<a name="l00424"></a>00424             GL_UNSIGNED_BYTE, (<span class="keywordtype">void</span> *)tex))) {
<a name="l00425"></a>00425     fprintf(stderr,<span class="stringliteral">&quot;GLULib%s\n&quot;</span>,gluErrorString(gluerr));
<a name="l00426"></a>00426     exit(-1);
<a name="l00427"></a>00427   }
<a name="l00428"></a>00428   <span class="comment">// Some pretty standard settings for wrapping and filtering.</span>
<a name="l00429"></a>00429   glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_REPEAT);
<a name="l00430"></a>00430   glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_REPEAT);
<a name="l00431"></a>00431   <span class="comment">// We start with GL_DECAL mode.</span>
<a name="l00432"></a>00432   glTexEnvf(GL_TEXTURE_ENV,GL_TEXTURE_ENV_MODE,GL_DECAL);
<a name="l00433"></a>00433   <span class="keywordflow">return</span> Texture_ID;
<a name="l00434"></a>00434 }
<a name="l00435"></a><a class="code" href="classDraw.html#adec17f3a83b10efe43dee2808cc57194">00435</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#adec17f3a83b10efe43dee2808cc57194" title="Griglia.">Draw::DefGriglia</a>(){
<a name="l00436"></a>00436   glDisable(GL_LIGHTING);
<a name="l00437"></a>00437   glDeleteLists(<a class="code" href="classDraw.html#a74e37fccd215196943f7cce4a261dcdb" title="Refers to the list of the grid.">Griglia</a>,1);
<a name="l00438"></a>00438   <a class="code" href="classDraw.html#a74e37fccd215196943f7cce4a261dcdb" title="Refers to the list of the grid.">Griglia</a> = glGenLists(1);
<a name="l00439"></a>00439   glNewList(<a class="code" href="classDraw.html#a74e37fccd215196943f7cce4a261dcdb" title="Refers to the list of the grid.">Griglia</a>,GL_COMPILE);
<a name="l00440"></a>00440   glBegin(GL_LINES);
<a name="l00441"></a>00441   glColor4f(1.-<a class="code" href="classDraw.html#a33a570150f3000f6af434d1f439971d3" title="Background color.">Rback</a>,1.-Gback,1.-Bback,1.0);
<a name="l00442"></a>00442   <span class="keywordtype">double</span> <a class="code" href="classDraw.html#a20146731f2945f9b0c25d61e11bb0217" title="Current step for the picture&#39;s name.">Step</a>[3];
<a name="l00443"></a>00443   glPushAttrib(GL_LIGHTING_BIT);
<a name="l00444"></a>00444   glDisable(GL_LIGHTING);
<a name="l00445"></a>00445   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> d=0;d&lt;3;d++){
<a name="l00446"></a>00446     <span class="comment">//GridEdge[d] = (int)(GridStep*Edge[d]*InvScaleUn);</span>
<a name="l00447"></a>00447     Step[d] = <a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[d]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>/<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[d];
<a name="l00448"></a>00448   }
<a name="l00449"></a>00449   <span class="comment">//--------------------------grid</span>
<a name="l00450"></a>00450   <span class="keywordflow">if</span>(<a class="code" href="classDraw.html#a5f0c1692f0d6fbbf9a083f07566bd3ce" title="Puts/removes the grid.">gr</a> == 1){
<a name="l00451"></a>00451     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[0];i++){
<a name="l00452"></a>00452       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[1];j++){
<a name="l00453"></a>00453    glVertex3f(i*Step[0],j*Step[1],<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[2]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>);
<a name="l00454"></a>00454    glVertex3f(i*Step[0],j*Step[1],0);
<a name="l00455"></a>00455       }
<a name="l00456"></a>00456     }
<a name="l00457"></a>00457     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[1];j++){
<a name="l00458"></a>00458       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[2];k++){
<a name="l00459"></a>00459    glVertex3f(0,j*Step[1],k*Step[2]);
<a name="l00460"></a>00460    glVertex3f(<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[0]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>,j*Step[1],k*Step[2]);
<a name="l00461"></a>00461       }
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[0];i++){
<a name="l00464"></a>00464       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[2];k++){
<a name="l00465"></a>00465    glVertex3f(i*Step[0],0.,k*Step[2]);
<a name="l00466"></a>00466    glVertex3f(i*Step[0],<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[1]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>,k*Step[2]);
<a name="l00467"></a>00467       }
<a name="l00468"></a>00468     }
<a name="l00469"></a>00469   }
<a name="l00470"></a>00470   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classDraw.html#a5f0c1692f0d6fbbf9a083f07566bd3ce" title="Puts/removes the grid.">gr</a> == 2){
<a name="l00471"></a>00471     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[0];i++){
<a name="l00472"></a>00472       glVertex3f(i*Step[0],0.,<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[2]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>);
<a name="l00473"></a>00473       glVertex3f(i*Step[0],0.,0.);
<a name="l00474"></a>00474       glVertex3f(i*Step[0],<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[1]*InvScaleUn,0.);
<a name="l00475"></a>00475       glVertex3f(i*Step[0],0.,0.);
<a name="l00476"></a>00476     }
<a name="l00477"></a>00477     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[1];j++){
<a name="l00478"></a>00478       glVertex3f(0,j*Step[1],0.);
<a name="l00479"></a>00479       glVertex3f(<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[0]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>,j*Step[1],0.);
<a name="l00480"></a>00480       glVertex3f(0.,j*Step[1],0.);
<a name="l00481"></a>00481       glVertex3f(0.,j*Step[1],InvScaleUn*<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[2]);
<a name="l00482"></a>00482     }
<a name="l00483"></a>00483     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[2];k++){
<a name="l00484"></a>00484       glVertex3f(0.,0.,k*Step[2]);
<a name="l00485"></a>00485       glVertex3f(0.,<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[1]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>,k*Step[2]);
<a name="l00486"></a>00486       glVertex3f(0.,0.,k*Step[2]);
<a name="l00487"></a>00487       glVertex3f(<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[0]*InvScaleUn,0.,k*Step[2]);
<a name="l00488"></a>00488     }
<a name="l00489"></a>00489   }
<a name="l00490"></a>00490   <span class="comment">//glDisable(GL_LINE_SMOOTH);</span>
<a name="l00491"></a>00491   <span class="comment">//----------------------label</span>
<a name="l00492"></a>00492   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[0];i++){
<a name="l00493"></a>00493     <span class="comment">//glPushMatrix();//info</span>
<a name="l00494"></a>00494     sprintf(<a class="code" href="classDraw.html#a4af3f2fea4f5121fb8a95778c80823bf" title="Characters for the grid.">Number</a>,<span class="stringliteral">&quot;%.2f&quot;</span>,i/(<span class="keywordtype">double</span>)<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[0]);
<a name="l00495"></a>00495     glRasterPos3f(i*Step[0],0.,0.);
<a name="l00496"></a>00496     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l = 1; l &lt; strlen(<a class="code" href="classDraw.html#a4af3f2fea4f5121fb8a95778c80823bf" title="Characters for the grid.">Number</a>); l++) {
<a name="l00497"></a>00497       glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24, <a class="code" href="classDraw.html#a4af3f2fea4f5121fb8a95778c80823bf" title="Characters for the grid.">Number</a>[l]);
<a name="l00498"></a>00498     }
<a name="l00499"></a>00499     glCallList(Point);
<a name="l00500"></a>00500     <span class="comment">//glPopMatrix();//info</span>
<a name="l00501"></a>00501   } 
<a name="l00502"></a>00502   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[1];j++){
<a name="l00503"></a>00503     <span class="comment">//glPushMatrix();//info</span>
<a name="l00504"></a>00504     sprintf(<a class="code" href="classDraw.html#a4af3f2fea4f5121fb8a95778c80823bf" title="Characters for the grid.">Number</a>,<span class="stringliteral">&quot;%.2f&quot;</span>,j/(<span class="keywordtype">double</span>)<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[1]);
<a name="l00505"></a>00505     glRasterPos3f(0.,j*Step[1],0.);
<a name="l00506"></a>00506     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l = 1; l &lt; strlen(<a class="code" href="classDraw.html#a4af3f2fea4f5121fb8a95778c80823bf" title="Characters for the grid.">Number</a>); l++) {
<a name="l00507"></a>00507       glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24, <a class="code" href="classDraw.html#a4af3f2fea4f5121fb8a95778c80823bf" title="Characters for the grid.">Number</a>[l]);
<a name="l00508"></a>00508     }
<a name="l00509"></a>00509     glCallList(Point);
<a name="l00510"></a>00510     <span class="comment">//glPopMatrix();//info</span>
<a name="l00511"></a>00511   } 
<a name="l00512"></a>00512   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;=<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[2];k++){
<a name="l00513"></a>00513     <span class="comment">//glPushMatrix();//info</span>
<a name="l00514"></a>00514     sprintf(<a class="code" href="classDraw.html#a4af3f2fea4f5121fb8a95778c80823bf" title="Characters for the grid.">Number</a>,<span class="stringliteral">&quot;%.2f&quot;</span>,k/(<span class="keywordtype">double</span>)<a class="code" href="classDraw.html#a0a12d9a9a2d537e1eec0bceb7eb9c604" title="Number of lines per edge.">GridEdge</a>[2]);
<a name="l00515"></a>00515     glRasterPos3f(0.,0.,k*Step[2]);
<a name="l00516"></a>00516     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l = 1; l &lt; strlen(<a class="code" href="classDraw.html#a4af3f2fea4f5121fb8a95778c80823bf" title="Characters for the grid.">Number</a>); l++) {
<a name="l00517"></a>00517       glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24, <a class="code" href="classDraw.html#a4af3f2fea4f5121fb8a95778c80823bf" title="Characters for the grid.">Number</a>[l]);
<a name="l00518"></a>00518     }
<a name="l00519"></a>00519     glCallList(Point);
<a name="l00520"></a>00520     <span class="comment">//glPopMatrix();//info</span>
<a name="l00521"></a>00521   }
<a name="l00522"></a>00522   glColor4f(.2,.1,.7,1.);
<a name="l00523"></a>00523   glRasterPos3f(-.1,0.,0.);
<a name="l00524"></a>00524   glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24,<span class="charliteral">&#39;0&#39;</span>);
<a name="l00525"></a>00525   glRasterPos3f(<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[0]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>+.1,0.,0.);
<a name="l00526"></a>00526   glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24,<span class="charliteral">&#39;x&#39;</span>);
<a name="l00527"></a>00527   glRasterPos3f(0.,<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[1]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>+.1,0.);
<a name="l00528"></a>00528   glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24,<span class="charliteral">&#39;y&#39;</span>);
<a name="l00529"></a>00529   glRasterPos3f(0.,0.,<a class="code" href="classDraw.html#a8895c89605e91c6cf7430bad336f77c6" title="Box size.">Edge</a>[2]*<a class="code" href="classDraw.html#ae460da3c47449cbbd76b22e9c2501a69" title="Rescale the three orthogonal directions.">InvScaleUn</a>+.1);
<a name="l00530"></a>00530   glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24,<span class="charliteral">&#39;z&#39;</span>);
<a name="l00531"></a>00531   glEnd();
<a name="l00532"></a>00532   glPopAttrib(); 
<a name="l00533"></a>00533   glEndList();
<a name="l00534"></a>00534   <span class="keywordflow">return</span> <a class="code" href="classDraw.html#a74e37fccd215196943f7cce4a261dcdb" title="Refers to the list of the grid.">Griglia</a>;
<a name="l00535"></a>00535 }
<a name="l00536"></a><a class="code" href="classDraw.html#ac5e4238325fb9dde3862a6f1053b5e8d">00536</a> <span class="keywordtype">void</span> <a class="code" href="classDraw.html#ac5e4238325fb9dde3862a6f1053b5e8d" title="Definition of the primitives.">Draw::Lista</a>(<span class="keywordtype">int</span> NSquare){
<a name="l00537"></a>00537   <span class="comment">// glEnable(GL_LIGHTING);</span>
<a name="l00538"></a>00538   <span class="comment">// glEnable(GL_COLOR_MATERIAL);</span>
<a name="l00539"></a>00539   <span class="comment">// glEnable(GL_NORMALIZE);</span>
<a name="l00540"></a>00540   <span class="comment">// //glEnable(GL_CULL_FACE);</span>
<a name="l00541"></a>00541   <span class="comment">// glCullFace(GL_FRONT_AND_BACK);//Disegna anche il lato dietro</span>
<a name="l00542"></a>00542   <span class="comment">// //glFrontFace(GL_CCW);//Senso antiorario</span>
<a name="l00543"></a>00543   <span class="comment">// //glColorMaterial(GL_FRONT_AND_BACK,GL_EMISSION);</span>
<a name="l00544"></a>00544   <span class="comment">// GLfloat Light1[4] = {0.,0.,0.,1.};</span>
<a name="l00545"></a>00545   <span class="comment">// glMaterialfv(GL_FRONT_AND_BACK,GL_AMBIENT_AND_DIFFUSE,Light1);</span>
<a name="l00546"></a>00546   <span class="comment">// GLfloat Light2[4] = {1.,1.,1.,1.};</span>
<a name="l00547"></a>00547   <span class="comment">// glMaterialfv(GL_FRONT_AND_BACK,GL_DIFFUSE,Light2);</span>
<a name="l00548"></a>00548   <span class="comment">// GLfloat Light3[4] = {0.,0.,0.,1.};</span>
<a name="l00549"></a>00549   <span class="comment">// glMaterialfv(GL_FRONT_AND_BACK,GL_EMISSION,Light3);</span>
<a name="l00550"></a>00550   <span class="comment">// GLfloat Light4[4] = {1.,1.,1.,1.};</span>
<a name="l00551"></a>00551   <span class="comment">// glMaterialfv(GL_FRONT_AND_BACK,GL_SPECULAR,Light3);</span>
<a name="l00552"></a>00552   <span class="comment">// GLfloat Light5[4] = {1.,1.,1.,1.};</span>
<a name="l00553"></a>00553   <span class="comment">// glMaterialfv(GL_FRONT_AND_BACK,GL_SHININESS,Light3);</span>
<a name="l00554"></a>00554   <span class="comment">// glEnable(GL_NORMALIZE);</span>
<a name="l00555"></a>00555   <a class="code" href="classDraw.html#a318bab761ab1ad340c3a7d2d17df4f9b" title="Point.">DefPoint</a>();
<a name="l00556"></a>00556   <a class="code" href="classDraw.html#adec17f3a83b10efe43dee2808cc57194" title="Griglia.">DefGriglia</a>();
<a name="l00557"></a>00557   <a class="code" href="classDraw.html#a5456e2c12fe02429ecf5bc09273ac3ed" title="Depth map.">DefLegend</a>();
<a name="l00558"></a>00558   <a class="code" href="classDraw.html#a19a76422b4564ec10df73ec0256f2974" title="Arrow.">DefArrowThin</a>();
<a name="l00559"></a>00559 }
<a name="l00560"></a>00560 <span class="keyword">static</span> <span class="keywordtype">double</span> WeightFuncSpline(<span class="keyword">const</span> <span class="keywordtype">double</span> x){
<a name="l00561"></a>00561   <span class="keywordflow">if</span>(x &lt; 0.)
<a name="l00562"></a>00562     <span class="keywordflow">return</span> 1.;
<a name="l00563"></a>00563   <span class="keywordflow">if</span>(fabs(x) &lt; 1.)
<a name="l00564"></a>00564     <span class="keywordflow">return</span> 2.*fabs(x)*x*x - 3.*x*x + 1.;
<a name="l00565"></a>00565   <span class="keywordflow">else</span>
<a name="l00566"></a>00566     <span class="keywordflow">return</span> 0.;
<a name="l00567"></a>00567 }
<a name="l00568"></a>00568 <span class="keyword">static</span> <span class="keywordtype">double</span> Parab(<span class="keyword">const</span> <span class="keywordtype">double</span> x){
<a name="l00569"></a>00569   <span class="keywordtype">double</span> Resp = -4.*x*x+4.;
<a name="l00570"></a>00570   <span class="keywordflow">if</span>(Resp &lt; 0) Resp = 0.;
<a name="l00571"></a>00571   <span class="keywordflow">return</span> Resp;
<a name="l00572"></a>00572 }
<a name="l00573"></a><a class="code" href="classDraw.html#a6c0ca0bd4c1c0efc555672b6671535bc">00573</a> <span class="keywordtype">void</span> <a class="code" href="classDraw.html#a6c0ca0bd4c1c0efc555672b6671535bc" title="Depth map.">Draw::DepthMap1</a>(<span class="keywordtype">double</span> Val,GLfloat *Color){
<a name="l00574"></a>00574   Color[0] = (GLfloat)WeightFuncSpline((1.-Val)*.7);
<a name="l00575"></a>00575   Color[1] = (GLfloat)Parab((Val-.5)*3.);
<a name="l00576"></a>00576   Color[2] = (GLfloat)WeightFuncSpline((Val)*.7);
<a name="l00577"></a>00577   Color[3] = 1.;
<a name="l00578"></a>00578 }
<a name="l00579"></a><a class="code" href="classDraw.html#af5edc3c8867513cbb290646b3e0e20ff">00579</a> <span class="keywordtype">void</span> <a class="code" href="classDraw.html#af5edc3c8867513cbb290646b3e0e20ff" title="Choose Depth map.">Draw::ChooseDepthMap</a>(<span class="keywordtype">int</span> i){
<a name="l00580"></a>00580   <span class="keywordflow">if</span>(i == 0)
<a name="l00581"></a>00581     <a class="code" href="classDraw.html#a840dda96dc55e47741fc47e2a7c80526" title="Pointer to a distance/field function.">Depth_Map</a> = &amp;<a class="code" href="classDraw.html#a6c0ca0bd4c1c0efc555672b6671535bc" title="Depth map.">Draw::DepthMap1</a>;
<a name="l00582"></a>00582 }
<a name="l00583"></a><a class="code" href="classDraw.html#a5456e2c12fe02429ecf5bc09273ac3ed">00583</a> <span class="keywordtype">int</span> <a class="code" href="classDraw.html#a5456e2c12fe02429ecf5bc09273ac3ed" title="Depth map.">Draw::DefLegend</a>(){
<a name="l00584"></a>00584   glDisable(GL_LIGHTING);
<a name="l00585"></a>00585   glDeleteLists(<a class="code" href="classDraw.html#aeac30e9b46c98e523843bce6661167ad" title="Refers to the list of the legend.">DrLegend</a>,1);
<a name="l00586"></a>00586   <a class="code" href="classDraw.html#aeac30e9b46c98e523843bce6661167ad" title="Refers to the list of the legend.">DrLegend</a> = glGenLists(1);
<a name="l00587"></a>00587   glNewList(<a class="code" href="classDraw.html#aeac30e9b46c98e523843bce6661167ad" title="Refers to the list of the legend.">DrLegend</a>,GL_COMPILE);
<a name="l00588"></a>00588   <span class="keywordtype">int</span> NSlab = 100;
<a name="l00589"></a>00589   GLfloat InvNSlab = 1./(GLfloat)NSlab;
<a name="l00590"></a>00590   <span class="keywordtype">double</span> dx = <a class="code" href="classDraw.html#aa7a99ea5e487ab7f3c00e958aac361f1" title="Width of the legend.">dxLeg</a>*InvNSlab;
<a name="l00591"></a>00591   <span class="keywordtype">double</span> dy = dyLeg*InvNSlab;
<a name="l00592"></a>00592   GLfloat Color[4];
<a name="l00593"></a>00593   <span class="keywordtype">char</span> <a class="code" href="classDraw.html#a4af3f2fea4f5121fb8a95778c80823bf" title="Characters for the grid.">Number</a>[10];
<a name="l00594"></a>00594   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;NSlab;i++){
<a name="l00595"></a>00595     GLfloat x = <a class="code" href="classDraw.html#afc2ee110131a4ef6b8d8e458b2aa8781" title="Position of the legend.">xLeg</a>;<span class="comment">// + Size[0]*i*dx;</span>
<a name="l00596"></a>00596     GLfloat y = yLeg + dyLeg*i*dy;
<a name="l00597"></a>00597     glBegin(GL_POLYGON);
<a name="l00598"></a>00598     glNormal3d(0.,0.,1.);
<a name="l00599"></a>00599     <a class="code" href="classDraw.html#ab3d9c36aceb9e5f4b158eb15b47c2003" title="Pointer to a generic function.">DepthMap</a>(i*InvNSlab,Color);
<a name="l00600"></a>00600     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> d=0;d&lt;3;d++)Color[d] -= .2;
<a name="l00601"></a>00601     glColor4fv(Color);
<a name="l00602"></a>00602     glVertex3d(x,y,zLeg);
<a name="l00603"></a>00603     glVertex3d(x+dx,y,zLeg);
<a name="l00604"></a>00604     glVertex3d(x+dx,y+dy,zLeg);
<a name="l00605"></a>00605     glVertex3d(x,y+dy,zLeg);
<a name="l00606"></a>00606     glEnd();
<a name="l00607"></a>00607     <span class="keywordflow">if</span>(!(i%10)){
<a name="l00608"></a>00608       glPushMatrix();<span class="comment">//Info</span>
<a name="l00609"></a>00609       sprintf(Number,<span class="stringliteral">&quot;%.2f&quot;</span>,i*InvNSlab);
<a name="l00610"></a>00610       glRasterPos3f(<a class="code" href="classDraw.html#afc2ee110131a4ef6b8d8e458b2aa8781" title="Position of the legend.">xLeg</a>+4.*dx,y,zLeg);
<a name="l00611"></a>00611       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l=1;l&lt;strlen(Number);l++){
<a name="l00612"></a>00612    <span class="comment">//glutBitmapCharacter(GLUT_BITMAP_HELVETICA_12,Number[l]);</span>
<a name="l00613"></a>00613          glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24,Number[l]);
<a name="l00614"></a>00614       }
<a name="l00615"></a>00615       glPopMatrix();
<a name="l00616"></a>00616     }
<a name="l00617"></a>00617   }
<a name="l00618"></a>00618   glPushMatrix();<span class="comment">//Info</span>
<a name="l00619"></a>00619   sprintf(Number,<span class="stringliteral">&quot;1.00&quot;</span>);
<a name="l00620"></a>00620   glRasterPos3f(<a class="code" href="classDraw.html#afc2ee110131a4ef6b8d8e458b2aa8781" title="Position of the legend.">xLeg</a>+4.*dx,yLeg+dyLeg,zLeg);
<a name="l00621"></a>00621   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l=1;l&lt;strlen(Number);l++){
<a name="l00622"></a>00622     <span class="comment">//glutBitmapCharacter(GLUT_BITMAP_HELVETICA_12,Number[l]);</span>
<a name="l00623"></a>00623     glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24,Number[l]);
<a name="l00624"></a>00624   }
<a name="l00625"></a>00625   glPopMatrix();
<a name="l00626"></a>00626   glEndList();
<a name="l00627"></a>00627   <span class="keywordflow">return</span> <a class="code" href="classDraw.html#aeac30e9b46c98e523843bce6661167ad" title="Refers to the list of the legend.">DrLegend</a>;
<a name="l00628"></a>00628 }
<a name="l00629"></a>00629 <span class="preprocessor">#endif // __glut_h__</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 27 2014 22:02:16 for Allink by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
